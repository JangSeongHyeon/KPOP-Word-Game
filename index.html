<!DOCTYPE html>
<html lang="jp">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=M+PLUS+1p" rel="stylesheet">
  <link href="https://fonts.googleapis.com/earlyaccess/nicomoji.css" rel="stylesheet">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <audio id='audio_play' src='./bgm.mp3'></audio>
  <audio id='click_play' src='./click.mp3'></audio>
  <audio id='timer_play' src="./timer.MP3"></audio>
  <div id="top">
    <h3 class="nico">BTS ARMY テスト</h3>
  </div>

  <!-- 시작 페이지 -->
  <div id="start_area" class="flex">
    <div id="start_container">
      <img id="start_img" src="bts.png" alt="">
      <h1 class="nico">BTS ARMY テスト</h1>
      <h5 id="start_explain">自分のBTS理解度は？</h5>
      <button id="start_button">はじめる</button>
    </div>
  </div>


  <!-- 문제 페이지 -->
  <div id="question_area">
    <img src="./timer.png" alt="" width="50px" height="50px">
    <progress id="question_progress" value="100" max="100"></progress>
    <span id="q-number"></span>
    <span id="q10"> / Q10</span>
    <div id="question">
      <img id="question_img" src="" alt="">
      <p id="question_line"></p>
      <p id="question_line2">この人は誰？</p>
    </div>


    <div id="buttons">
      <button class="answer_button">1</button>
      <button class="answer_button">2</button>
      <button class="answer_button">3</button>
    </div>
  </div>


  <!-- 결과 페이지 -->
  <div id="result_area">
    <h2 id="result_title" class="nico">
      </h1>

      <img id="result_img" src="./LV5.jpg" alt="">
      <h2 class="nico">ARMY レベル</h2>
      <progress id="result_progress" value="50" max="100"></progress>
      <p id="result_explain"></p>
      <div>
        <button id="replay_button">再挑戦！</button>
      </div>

      <div id="ad_area">
        <ins class="kakao_ad_area" style="display:none;" data-ad-unit= "DAN-XQ5Ae0i3qdaFuOuU" data-ad-width= "320" data-ad-height= "100"></ins> 
      </div>
  </div>

  
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>


  <script>
    var bgmaudio = document.getElementById('audio_play');
    var clickaudio = document.getElementById('click_play');
    var timeraudio = document.getElementById('timer_play');
    const startButton = document.querySelector('#start_button');
    const answerButton1 = document.getElementsByClassName("answer_button")[0];
    answerButton1.addEventListener('click', next);


    const answerButton2 = document.getElementsByClassName("answer_button")[1];
    answerButton2.addEventListener('click', next);

    const answerButton3 = document.getElementsByClassName("answer_button")[2];
    answerButton3.addEventListener('click', next);

    // const answerButton4 = document.getElementsByClassName("answer_button")[3];
    // answerButton4.addEventListener('click', next);

    const replayButton = document.querySelector('#replay_button');
    replayButton.addEventListener('click', replay);


    let order = 0;
    let score = 0;
    let timer = 100;
    let myvar;
    let timerbar = document.getElementById("question_progress");



    const questions = {
      0: {
        question: 'Vの出身地はどこでしょうか？',
        0: 'ソウル',
        1: '大邱（てぐ）',
        2: '釜山（ぷさん）',
        answer: '大邱（てぐ）'
      },
      1: {
        question: 'アジア最大の音楽授賞式「MAMA」にてBTSが初めて大賞を受賞したのは何年ですか？',
        0: '2016年',
        1: '2017年',
        2: '2018年',
        answer: '2016年'
      },
      2: {
        question: 'これは誰？',
        0: 'SUGA',
        1: 'JUNGKOOK',
        2: 'JIMIN',
        img: './jm.JPG',
        answer: 'JIMIN'
      },
      3: {
        question: '常に努力することを忘れないJIMINは、何の虫と呼ばれているでしょうか？',
        0: '練習',
        1: 'ダンス',
        2: '努力',
        answer: '練習'
      },
      4: {
        question: 'これは誰？',
        0: 'V',
        1: 'J-HOPE',
        2: 'RM',
        img: './v.JPG',
        answer: 'V'
      },
      5: {
        question: '寝ることが好きなことで有名なSUGAですが、そんな彼が得意なスポーツは何でしょうか？',
        0: 'バドミントン',
        1: 'サッカー',
        2: 'バスケットボール',
        answer: 'バスケットボール'
      },
      6: {
        question: 'RMと誕生日が同じメンバーは誰？',
        0: 'SUGA',
        1: 'JUNGKOOK',
        2: 'V',
        answer: 'JUNGKOOK'
      },
      7: {
        question: 'これは誰？',
        0: 'J-HOPE',
        1: 'JIN',
        2: 'RM',
        img: './jin.JPG',
        answer: 'RM'
      },
      8: {
        question: '2017年2月18日から12月10日まで行った「2017 BTS Live Trilogy Episode III: The Wings Tour」でJUNGKOOKがパフォーマンスしたソロ曲は何でしょうか？',
        0: 'Begin',
        1: 'Euphoria',
        2: 'My Time',
        answer: 'Begin'
      },
      9: {
        question: 'J-HOPEは自己紹介の時、「僕はあなたの○○、あなたは僕の○○」というフレーズを言います。○○に入る共通の言葉は何でしょうか？',
        0: '癒し',
        1: '希望',
        2: '情熱',
        answer: '希望'
      },
    }


    // 시작버튼 리스너
    startButton.addEventListener('click', event => {
      document.querySelector('#start_area').style.display = "none";
      document.querySelector('#question_area').style.display = "block";
      document.querySelector('#top').style.display = "none";
      bgmaudio.play();
      showViews();
    });





    // 보기버튼에 내용 뿌리기
    function showViews() {
      if (order > 9) {
        console.log('게임 끝');
        showResults();
      } else {
        timeraudio.pause();
        document.getElementById('question_line').innerHTML = questions[order]['question'];
        document.getElementById('q-number').innerHTML = 'Q' + (order + 1);
        timerbar.style.setProperty("--c", "#B0F7FF");

        if (order == 2) {
          document.getElementById('question_img').src = questions[order]['img'];
          document.getElementById('question_img').style.display = 'block';
          document.getElementById('question_line').style.display = 'none';
          document.getElementById('question_line2').style.display = 'block';
        } else if (order == 4) {
          document.getElementById('question_img').src = questions[order]['img'];
          document.getElementById('question_img').style.display = 'block';
          document.getElementById('question_line').style.display = 'none';
          document.getElementById('question_line2').style.display = 'block';
        } else if (order == 7) {
          document.getElementById('question_img').src = questions[order]['img'];
          document.getElementById('question_img').style.display = 'block';
          document.getElementById('question_line').style.display = 'none';
          document.getElementById('question_line2').style.display = 'block';
        } else {
          document.getElementById('question_img').style.display = 'none';
          document.getElementById('question_line').style.display = 'block';
          document.getElementById('question_line2').style.display = 'none';
        }

        let counter = 100;
        myvar = setInterval(frame, 1000);


        timerbar.value = 100;
        for (var i = 0; i < 3; i++) {
          document.getElementsByClassName('answer_button')[i].innerHTML = questions[order][i];
        }

        function frame() {
          if (counter <= 0) {
            clearInterval(myvar);
            order++;
            showViews();
          } else {
            if (counter < 70) {
              timerbar.style.setProperty("--c", "#FFA887");
              timeraudio.play();
            }
            counter = counter - 10;
            timerbar.value = counter;
          }
        }
      }
    }



    // 다음페이지로 가기
    function next(event) {
      clickaudio.play();
      clearInterval(myvar);
      if (event.target.textContent == questions[order].answer) {
        score += 1;
        console.log('점수', score);
      }



      order++;
      showViews();
    }


    function showResults() {
      document.querySelector('#question_area').style.display = "none";
      document.querySelector('#result_area').style.display = "block";

      if (score >= 9) {
        document.getElementById("result_img").src = "LV5.jpg";
        document.getElementById("result_title").innerHTML = "LV4.ARMY"
        document.getElementById("result_progress").value = "100";
        document.getElementById("result_explain").innerHTML = "あなたはLV4のARMYです"
      } else if (score >= 7) {
        document.getElementById("result_img").src = "LV4.jpg";
        document.getElementById("result_title").innerHTML = "LV3.ARMY"
        document.getElementById("result_progress").value = "80";
        document.getElementById("result_explain").innerHTML = "あなたはLV3のARMYです"
      } else if (score >= 5) {
        document.getElementById("result_img").src = "LV3.jpg";
        document.getElementById("result_title").innerHTML = "L2.ARMY"
        document.getElementById("result_progress").value = "60";
        document.getElementById("result_explain").innerHTML = "あなたはLV2のARMYです"
      } else {
        document.getElementById("result_img").src = "LV1.png";
        document.getElementById("result_title").innerHTML = "LV1.ARMY"
        document.getElementById("result_progress").value = "20";
        document.getElementById("result_explain").innerHTML = "あなたはLV1のARMYです"
      }

    }


    function replay() {
      document.querySelector('#start_area').style.display = "block";
      document.querySelector('#result_area').style.display = "none";
      document.querySelector('#top').style.display = "none";
      score = 0;
      order = 0;
    }


    // 무한재생
    bgmaudio.addEventListener('ended', function () {
      this.currentTime = 0;
      this.play();
    }, false);
  </script>

</body>

</html>
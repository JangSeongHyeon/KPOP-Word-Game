<!DOCTYPE html>
<html lang="kr">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hi+Melody&family=Jua&family=Single+Day&display=swap" rel="stylesheet">
  <title>대구 토박이 퀴즈</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <audio id='audio_play' src='./bgm.mp3'></audio>
  <audio id='click_play' src='./click.mp3'></audio>
  <audio id='timer_play' src="./timer.MP3"></audio>

  <!-- 시작 페이지 -->
  <div id="start_area">
    <div id="start_container">
      <h1 id="main_text" class="singleday">대구 토박이 퀴즈</h1>
      <h5 id="start_explain">나는 대구에 대해 얼마나 알고 있을까?</h5>
    </div>
    <button id="start_button">시작하기</button>
  </div>


  <div id="select_area">
    <h1 id="select_exp">도전 할 문제의 난이도를 선택해주세요.</h1>
    <div id="select_buttons">
      <button id="lv1button" class="sel_button" style="background-color: #C1FF6B;border: 1px solid #C1FF6B;">LV1</button>
      <button id="lv2button" class="sel_button" style="background-color: #FFA147;border: 1px solid #FFA147;">LV2</button>
    </div>
  </div>

  <!-- 문제 페이지 -->
  <div id="question_area">
    <div id="question_top">
      <progress id="question_progress" value="100" max="100"></progress>
    </div>
    <div id="question">
      <img id="question_img" src="./background.jpg" alt="">
      <p id="question_line"></p>
      <p id="question_line2">ddddddddddddddddddddddddddddddddddddddddddddddddddddd</p>
    </div>


    <div id="buttons">
      <button class="answer_button">1</button>
      <button class="answer_button">2</button>
      <button class="answer_button">3</button>
    </div>
  </div>



  <!-- 결과 페이지 -->
  <div id="result_area">
    <h2 id="result_title" class="nico">
      </h1>

      <img id="result_img" src="./LV5.jpg" alt="">
      <h2 class="nico">ARMY レベル</h2>
      <progress id="result_progress" value="50" max="100"></progress>
      <p id="result_explain"></p>
      <div>
        <button id="replay_button">再挑戦！</button>
      </div>

      
      <h2 style="margin-bottom: 5px;"> ユーザーコメント</h2>
  </div>

  <script>
    var bgmaudio = document.getElementById('audio_play');
    var clickaudio = document.getElementById('click_play');
    var timeraudio = document.getElementById('timer_play');
    const startButton = document.querySelector('#start_button');
    const answerButton1 = document.getElementsByClassName("answer_button")[0];
    const lv1Button=document.getElementById('lv1button');
    const lv2Button=document.getElementById('lv2button');

    answerButton1.addEventListener('click', next);

    const answerButton2 = document.getElementsByClassName("answer_button")[1];
    answerButton2.addEventListener('click', next);

    const answerButton3 = document.getElementsByClassName("answer_button")[2];
    answerButton3.addEventListener('click', next);

    // const answerButton4 = document.getElementsByClassName("answer_button")[3];
    // answerButton4.addEventListener('click', next);

    const replayButton = document.querySelector('#replay_button');
    replayButton.addEventListener('click', replay);


    let order = 0;
    let score = 0;
    let timer = 100;
    let myvar;
    let level=1;
    let timerbar = document.getElementById("question_progress");



    const questions = {
      0: {
        question: '대구의 슬로건으로 올바른 것은?',
        0: 'Colorful Daegu',
        1: 'Dynamic Daegu',
        2: 'BlueCity Daegu',
        answer: 'Colorful Daegu'
      },
      1: {
        question: '대구 도심의 정중앙에 위치한 최대 번화가 겸 랜드마크로 대구사람들에게 시내로 통하기도 하는 이곳은 어디일까요?',
        0: '달구벌로',
        1: '동성로',
        2: '동대구로',
        answer: '동성로'
      },
      2: {
        question: '이 장소의 이름은 무엇일까요?',
        0: '월광수변공원',
        1: '수성못',
        2: '하중도',
        img: './jm.JPG',
        answer: '수성못'
      },
      3: {
        question: '대구에 위치한 놀이 공원으로 알맞은 것은?',
        0: '롯데월드',
        1: '오월드',
        2: '이월드',
        answer: '이월드'
      },
      4: {
        question: '이 타워 이름은?',
        0: '남산타워',
        1: '롯데타워',
        2: '83타워',
        img: './v.JPG',
        answer: '83타워'
      },
      5: {
        question: '다음 중 대구의 대표음식이 아닌 것은?',
        0: '따로국밥',
        1: '찜갈비',
        2: '밀면',
        answer: '밀면'
      },
      6: {
        question: '다음중 대구 대표 빵집으로 알맞은 것은?',
        0: '성심당',
        1: '삼송빵집',
        2: '아미앙 베이커리',
        answer: '삼송빵집'
      },
      7: {
        question: '이 장소의 이름은 무엇일까요?',
        0: '김광석 거리',
        1: '계산 성당',
        2: '이상화 고택',
        img: './jin.JPG',
        answer: '김광석 거리'
      },
      8: {
        question: '다음 중 대구의 축제가 아닌 것은?',
        0: '빛초롱 축제',
        1: '치맥페스티벌',
        2: '한방문화축제',
        answer: '빛초롱 축제'
      },
      9: {
        question: '다음 중 대구의 대표 야구팀으로 알맞은 것은 무엇 인가요?',
        0: '한화 이글스',
        1: '삼성 라이온즈',
        2: '롯데 자이언츠',
        answer: '삼성 라이온즈'
      },
    }


    const questions2 = {
      0: {
        question: '다음 중 위치별 대표음식으로 알맞지 않은 것은?',
        0: '동인동 - 찜갈비',
        1: '북성로 - 연탄불고기',
        2: '안지랑 - 납작만두',
        answer: '안지랑 - 납작만두'
      },
      1: {
        question: '대구의 옛 이름으로 알맞지 않은 것은?',
        0: '대구 직할시',
        1: '달고개',
        2: '달구벌',
        answer: '달고개'
      },
      2: {
        question: '이 곳의 이름은 무엇인가요?',
        0: '아양교 기찻길',
        1: '동촌 해맞이 다리',
        2: '와룡대교',
        img: './jm.JPG',
        answer: '아양교 기찻길'
      },
      3: {
        question: '대구 이월드의 옛 이름으로 알맞은 것은?',
        0: '대구랜드',
        1: '우방타워랜드',
        2: '두류타워랜드',
        answer: '우방타워랜드'
      },
      4: {
        question: '이 지하철 역의 이름은 무엇인가요?',
        0: '칠성시장',
        1: '대구역',
        2: '명덕',
        img: './v.JPG',
        answer: '명덕'
      },
      5: {
        question: '다음 중 대구광역시 내에 위치한 대학교는?',
        0: '경북대학교',
        1: '대구대학교',
        2: '영남대학교',
        answer: '경북대학교'
      },
      6: {
        question: '다음 중 대구 출신 가수가 아닌 사람은?',
        0: '김광석',
        1: '방탄소년단 뷔',
        2: '영탁',
        answer: '영탁'
      },
      7: {
        question: '이 장소의 이름은 무엇일까요?',
        0: '김광석 거리',
        1: '계산 성당',
        2: '이상화 고택',
        img: './jin.JPG',
        answer: '김광석 거리'
      },
      8: {
        question: '강과 물, 자연을 모티브로 디자인된 건물입니다. 이곳은 어디일까요?',
        0: '강정보 디아크',
        1: '제일교회',
        2: 'ㅁㄴ',
        answer: '강정보 디아크'
      },
      9: {
        question: '다음중 대구의 지하철 역으로 알맞지 않은 것은?',
        0: '만촌',
        1: '상인',
        2: '월성',
        answer: '월성'
      },
    }
    

    // 시작버튼 리스너
    startButton.addEventListener('click', event => {
      document.querySelector('#start_area').style.display = "none";
      document.querySelector('#select_area').style.display="block";
      bgmaudio.play();
    });


    lv1Button.addEventListener('click',event=>{
      document.querySelector('#select_area').style.display="none";
      document.querySelector('#question_area').style.display="block";
      level=1;
      showViews();
    })

    lv2Button.addEventListener('click',event=>{
      document.querySelector('#select_area').style.display="none";
      document.querySelector('#question_area').style.display="block";
      level=2;
      showViews();
    })

    // 보기버튼에 내용 뿌리기
    function showViews() {
      if (order > 9) {
        console.log('게임 끝');
        showResults();
      } else {
        timeraudio.pause();
        timerbar.style.setProperty("--c", "#B0F7FF");
        
        // 레벨1 선택시
        if(level==1){
          document.getElementById('question_line').innerHTML = questions[order]['question'];
          if (order == 2) {
            document.getElementById('question_img').src = questions[order]['img'];
            document.getElementById('question_img').style.display = 'block';
            document.getElementById('question_line').style.display = 'none';
            document.getElementById('question_line2').style.display = 'block';
            
          } else if (order == 4) {
            document.getElementById('question_img').src = questions[order]['img'];
            document.getElementById('question_img').style.display = 'block';
            document.getElementById('question_line').style.display = 'none';
            document.getElementById('question_line2').style.display = 'block';
          } else if (order == 7) {
            document.getElementById('question_img').src = questions[order]['img'];
            document.getElementById('question_img').style.display = 'block';
            document.getElementById('question_line').style.display = 'none';
            document.getElementById('question_line2').style.display = 'block';
          } else {
            document.getElementById('question_img').style.display = 'none';
            document.getElementById('question_line').style.display = 'block';
            document.getElementById('question_line2').style.display = 'none';
          }
          for (var i = 0; i < 3; i++) {
            document.getElementsByClassName('answer_button')[i].innerHTML = questions[order][i];
          }
      // 레벨2 선택시
        }else{
          document.getElementById('question_line').innerHTML = questions2[order]['question'];
          if (order == 2) {
            document.getElementById('question_img').src = questions2[order]['img'];
            document.getElementById('question_img').style.display = 'block';
            document.getElementById('question_line').style.display = 'none';
            document.getElementById('question_line2').style.display = 'block';
            
          } else if (order == 4) {
            document.getElementById('question_img').src = questions2[order]['img'];
            document.getElementById('question_img').style.display = 'block';
            document.getElementById('question_line').style.display = 'none';
            document.getElementById('question_line2').style.display = 'block';
          } else if (order == 7) {
            document.getElementById('question_img').src = questions2[order]['img'];
            document.getElementById('question_img').style.display = 'block';
            document.getElementById('question_line').style.display = 'none';
            document.getElementById('question_line2').style.display = 'block';
          } else {
            document.getElementById('question_img').style.display = 'none';
            document.getElementById('question_line').style.display = 'block';
            document.getElementById('question_line2').style.display = 'none';
          }
          for (var i = 0; i < 3; i++) {
            document.getElementsByClassName('answer_button')[i].innerHTML = questions2[order][i];
          }
        }

        let counter = 100;
        myvar = setInterval(frame, 1000);


        timerbar.value = 100;
        

        function frame() {
          if (counter <= 0) {
            clearInterval(myvar);
            order++;
            showViews();
          } else {
            if (counter < 70) {
              timerbar.style.setProperty("--c", "#FFA887");
              timeraudio.play();
            }
            counter = counter - 10;
            timerbar.value = counter;
          }
        }
      }
    }



    // 다음페이지로 가기
    function next(event) {
      clickaudio.play();
      clearInterval(myvar);
      if (event.target.textContent == questions[order].answer) {
        score += 1;
        console.log('점수', score);
      }



      order++;
      showViews();
    }


    function showResults() {
      document.querySelector('#question_area').style.display = "none";
      document.querySelector('#result_area').style.display = "block";

      if (score >= 9) {
        document.getElementById("result_img").src = "LV5.jpg";
        document.getElementById("result_title").innerHTML = "LV4.ARMY"
        document.getElementById("result_progress").value = "100";
        document.getElementById("result_explain").innerHTML = "あなたはLV4のARMYです"
      } else if (score >= 7) {
        document.getElementById("result_img").src = "LV4.jpg";
        document.getElementById("result_title").innerHTML = "LV3.ARMY"
        document.getElementById("result_progress").value = "80";
        document.getElementById("result_explain").innerHTML = "あなたはLV3のARMYです"
      } else if (score >= 5) {
        document.getElementById("result_img").src = "LV3.jpg";
        document.getElementById("result_title").innerHTML = "L2.ARMY"
        document.getElementById("result_progress").value = "60";
        document.getElementById("result_explain").innerHTML = "あなたはLV2のARMYです"
      } else {
        document.getElementById("result_img").src = "LV1.png";
        document.getElementById("result_title").innerHTML = "LV1.ARMY"
        document.getElementById("result_progress").value = "20";
        document.getElementById("result_explain").innerHTML = "あなたはLV1のARMYです"
      }

    }


    function replay() {
      document.querySelector('#start_area').style.display = "block";
      document.querySelector('#result_area').style.display = "none";
      score = 0;
      order = 0;
    }


    // 무한재생
    bgmaudio.addEventListener('ended', function () {
      this.currentTime = 0;
      this.play();
    }, false);
  </script>

</body>

</html>